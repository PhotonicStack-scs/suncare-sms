/**
 * Predefined checklist templates for service management
 * These should be seeded to the database
 */

import type { FindingSeverity } from "~/types/checklists";

export interface ChecklistTemplateData {
  name: string;
  description: string;
  systemType: "SOLAR" | "BESS" | "HYBRID";
  visitType: string;
  items: Array<{
    category: string;
    sortOrder: number;
    code: string;
    description: string;
    inputType: string;
    options?: string[];
    minValue?: number;
    maxValue?: number;
    unit?: string;
    isMandatory: boolean;
    photoRequired: boolean;
    helpText?: string;
    defaultSeverity?: FindingSeverity;
  }>;
}

export const solarAnnualInspectionTemplate: ChecklistTemplateData = {
  name: "Årlig solcelleinspeksjon",
  description: "Komplett sjekkliste for årlig inspeksjon av solcelleinstallasjoner",
  systemType: "SOLAR",
  visitType: "ANNUAL_INSPECTION",
  items: [
    // Category 1: Safety and Access
    {
      category: "Sikkerhet og tilgang",
      sortOrder: 1,
      code: "1.1",
      description: "HMS-vurdering gjennomført før start",
      inputType: "YES_NO",
      isMandatory: true,
      photoRequired: false,
      helpText: "Kontroller at nødvendig sikkerhetsutstyr er tilgjengelig",
    },
    {
      category: "Sikkerhet og tilgang",
      sortOrder: 2,
      code: "1.2",
      description: "Tilgang til installasjon verifisert",
      inputType: "YES_NO",
      isMandatory: true,
      photoRequired: false,
    },
    {
      category: "Sikkerhet og tilgang",
      sortOrder: 3,
      code: "1.3",
      description: "Nødavstengning identifisert og testet",
      inputType: "YES_NO",
      isMandatory: true,
      photoRequired: false,
      defaultSeverity: "CRITICAL",
    },
    {
      category: "Sikkerhet og tilgang",
      sortOrder: 4,
      code: "1.4",
      description: "Foto av HMS-skilt/merking",
      inputType: "IMAGE",
      isMandatory: true,
      photoRequired: true,
    },

    // Category 2: Solar Panels
    {
      category: "Solcellepaneler",
      sortOrder: 5,
      code: "2.1",
      description: "Visuell inspeksjon - fysisk skade",
      inputType: "YES_NO",
      isMandatory: true,
      photoRequired: true,
      helpText: "Sjekk for sprekker, deformasjon eller synlige skader",
      defaultSeverity: "SERIOUS",
    },
    {
      category: "Solcellepaneler",
      sortOrder: 6,
      code: "2.2",
      description: "Smuss/rusk på paneler",
      inputType: "CHOICE",
      options: ["1 - Rent", "2 - Lett smuss", "3 - Moderat", "4 - Mye smuss", "5 - Kraftig tilsmusset"],
      isMandatory: true,
      photoRequired: false,
      defaultSeverity: "MINOR",
    },
    {
      category: "Solcellepaneler",
      sortOrder: 7,
      code: "2.3",
      description: "Rengjøring utført",
      inputType: "YES_NO",
      isMandatory: false,
      photoRequired: false,
    },
    {
      category: "Solcellepaneler",
      sortOrder: 8,
      code: "2.4",
      description: "Hotspot-skanning",
      inputType: "IMAGE",
      isMandatory: false,
      photoRequired: true,
      helpText: "Bruk IR-kamera for å identifisere hotspots",
      defaultSeverity: "SERIOUS",
    },
    {
      category: "Solcellepaneler",
      sortOrder: 9,
      code: "2.5",
      description: "Antall mikro-sprekker identifisert",
      inputType: "NUMERIC",
      minValue: 0,
      maxValue: 100,
      isMandatory: false,
      photoRequired: false,
      defaultSeverity: "MODERATE",
    },
    {
      category: "Solcellepaneler",
      sortOrder: 10,
      code: "2.6",
      description: "Festepunkter kontrollert",
      inputType: "YES_NO",
      isMandatory: true,
      photoRequired: false,
      defaultSeverity: "SERIOUS",
    },

    // Category 3: Inverters
    {
      category: "Invertere",
      sortOrder: 11,
      code: "3.1",
      description: "Inverter status OK",
      inputType: "YES_NO",
      isMandatory: true,
      photoRequired: false,
      defaultSeverity: "CRITICAL",
    },
    {
      category: "Invertere",
      sortOrder: 12,
      code: "3.2",
      description: "Feilkoder registrert",
      inputType: "TEXT",
      isMandatory: false,
      photoRequired: false,
      helpText: "Noter eventuelle feilkoder fra displayet",
    },
    {
      category: "Invertere",
      sortOrder: 13,
      code: "3.3",
      description: "Firmware-versjon",
      inputType: "TEXT",
      isMandatory: true,
      photoRequired: false,
    },
    {
      category: "Invertere",
      sortOrder: 14,
      code: "3.4",
      description: "Ventilasjonsåpninger rene",
      inputType: "YES_NO",
      isMandatory: true,
      photoRequired: false,
      defaultSeverity: "MODERATE",
    },
    {
      category: "Invertere",
      sortOrder: 15,
      code: "3.5",
      description: "AC/DC spenning målt",
      inputType: "NUMERIC",
      unit: "V",
      isMandatory: true,
      photoRequired: false,
    },
    {
      category: "Invertere",
      sortOrder: 16,
      code: "3.6",
      description: "Produksjonsavlesning",
      inputType: "NUMERIC",
      unit: "kWh",
      isMandatory: true,
      photoRequired: false,
    },

    // Category 4: Cables and Connections
    {
      category: "Kabler og tilkoblinger",
      sortOrder: 17,
      code: "4.1",
      description: "Visuell inspeksjon av kabler",
      inputType: "YES_NO",
      isMandatory: true,
      photoRequired: true,
      defaultSeverity: "SERIOUS",
    },
    {
      category: "Kabler og tilkoblinger",
      sortOrder: 18,
      code: "4.2",
      description: "MC4 kontakter kontrollert",
      inputType: "YES_NO",
      isMandatory: true,
      photoRequired: false,
      defaultSeverity: "MODERATE",
    },
    {
      category: "Kabler og tilkoblinger",
      sortOrder: 19,
      code: "4.3",
      description: "Jordfeiltest utført",
      inputType: "YES_NO",
      isMandatory: true,
      photoRequired: false,
      defaultSeverity: "CRITICAL",
    },
    {
      category: "Kabler og tilkoblinger",
      sortOrder: 20,
      code: "4.4",
      description: "Kabelgjennomføringer tettet",
      inputType: "YES_NO",
      isMandatory: true,
      photoRequired: false,
      defaultSeverity: "MODERATE",
    },

    // Category 5: Mounting and Structure
    {
      category: "Montering og struktur",
      sortOrder: 21,
      code: "5.1",
      description: "Takklemmer/monteringssystem OK",
      inputType: "YES_NO",
      isMandatory: true,
      photoRequired: false,
      defaultSeverity: "SERIOUS",
    },
    {
      category: "Montering og struktur",
      sortOrder: 22,
      code: "5.2",
      description: "Korrosjon observert",
      inputType: "YES_NO",
      isMandatory: false,
      photoRequired: true,
      defaultSeverity: "MODERATE",
    },
    {
      category: "Montering og struktur",
      sortOrder: 23,
      code: "5.3",
      description: "Taktetning OK",
      inputType: "YES_NO",
      isMandatory: true,
      photoRequired: false,
      defaultSeverity: "SERIOUS",
    },

    // Category 6: Performance and Documentation
    {
      category: "Ytelse og dokumentasjon",
      sortOrder: 24,
      code: "6.1",
      description: "Sammenligning med forventet produksjon",
      inputType: "NUMERIC",
      unit: "%",
      minValue: 0,
      maxValue: 150,
      isMandatory: true,
      photoRequired: false,
      helpText: "100% = forventet produksjon",
    },
    {
      category: "Ytelse og dokumentasjon",
      sortOrder: 25,
      code: "6.2",
      description: "Avvik notert",
      inputType: "TEXT",
      isMandatory: false,
      photoRequired: false,
    },
    {
      category: "Ytelse og dokumentasjon",
      sortOrder: 26,
      code: "6.3",
      description: "Anbefalinger",
      inputType: "TEXT",
      isMandatory: false,
      photoRequired: false,
    },
    {
      category: "Ytelse og dokumentasjon",
      sortOrder: 27,
      code: "6.4",
      description: "Kundesignatur",
      inputType: "SIGNATURE",
      isMandatory: true,
      photoRequired: false,
    },
    {
      category: "Ytelse og dokumentasjon",
      sortOrder: 28,
      code: "6.5",
      description: "Generelle kommentarer",
      inputType: "TEXT",
      isMandatory: false,
      photoRequired: false,
    },
  ],
};

export const bessInspectionTemplate: ChecklistTemplateData = {
  name: "BESS-inspeksjon",
  description: "Sjekkliste for inspeksjon av batterilagringssystemer",
  systemType: "BESS",
  visitType: "ANNUAL_INSPECTION",
  items: [
    {
      category: "Sikkerhet",
      sortOrder: 1,
      code: "B1.1",
      description: "HMS-vurdering gjennomført",
      inputType: "YES_NO",
      isMandatory: true,
      photoRequired: false,
    },
    {
      category: "Sikkerhet",
      sortOrder: 2,
      code: "B1.2",
      description: "Brannvernutstyr tilgjengelig",
      inputType: "YES_NO",
      isMandatory: true,
      photoRequired: false,
      defaultSeverity: "CRITICAL",
    },
    {
      category: "Sikkerhet",
      sortOrder: 3,
      code: "B1.3",
      description: "Nødavstengning testet",
      inputType: "YES_NO",
      isMandatory: true,
      photoRequired: false,
      defaultSeverity: "CRITICAL",
    },
    {
      category: "Batteri",
      sortOrder: 4,
      code: "B2.1",
      description: "Batteristatus OK",
      inputType: "YES_NO",
      isMandatory: true,
      photoRequired: false,
      defaultSeverity: "CRITICAL",
    },
    {
      category: "Batteri",
      sortOrder: 5,
      code: "B2.2",
      description: "State of Health (SoH)",
      inputType: "NUMERIC",
      unit: "%",
      minValue: 0,
      maxValue: 100,
      isMandatory: true,
      photoRequired: false,
    },
    {
      category: "Batteri",
      sortOrder: 6,
      code: "B2.3",
      description: "State of Charge (SoC)",
      inputType: "NUMERIC",
      unit: "%",
      minValue: 0,
      maxValue: 100,
      isMandatory: true,
      photoRequired: false,
    },
    {
      category: "Batteri",
      sortOrder: 7,
      code: "B2.4",
      description: "Temperatur i batterirom",
      inputType: "NUMERIC",
      unit: "°C",
      minValue: -10,
      maxValue: 50,
      isMandatory: true,
      photoRequired: false,
      defaultSeverity: "SERIOUS",
    },
    {
      category: "Batteri",
      sortOrder: 8,
      code: "B2.5",
      description: "Visuell inspeksjon - ingen hevelse",
      inputType: "YES_NO",
      isMandatory: true,
      photoRequired: true,
      defaultSeverity: "CRITICAL",
    },
    {
      category: "System",
      sortOrder: 9,
      code: "B3.1",
      description: "BMS status OK",
      inputType: "YES_NO",
      isMandatory: true,
      photoRequired: false,
      defaultSeverity: "CRITICAL",
    },
    {
      category: "System",
      sortOrder: 10,
      code: "B3.2",
      description: "Feillogger gjennomgått",
      inputType: "YES_NO",
      isMandatory: true,
      photoRequired: false,
    },
    {
      category: "System",
      sortOrder: 11,
      code: "B3.3",
      description: "Firmware-versjon",
      inputType: "TEXT",
      isMandatory: true,
      photoRequired: false,
    },
    {
      category: "System",
      sortOrder: 12,
      code: "B3.4",
      description: "Ventilasjon og kjøling OK",
      inputType: "YES_NO",
      isMandatory: true,
      photoRequired: false,
      defaultSeverity: "SERIOUS",
    },
    {
      category: "Dokumentasjon",
      sortOrder: 13,
      code: "B4.1",
      description: "Kapasitetstest utført",
      inputType: "YES_NO",
      isMandatory: false,
      photoRequired: false,
    },
    {
      category: "Dokumentasjon",
      sortOrder: 14,
      code: "B4.2",
      description: "Anbefalinger",
      inputType: "TEXT",
      isMandatory: false,
      photoRequired: false,
    },
    {
      category: "Dokumentasjon",
      sortOrder: 15,
      code: "B4.3",
      description: "Kundesignatur",
      inputType: "SIGNATURE",
      isMandatory: true,
      photoRequired: false,
    },
  ],
};

export const allTemplates = [
  solarAnnualInspectionTemplate,
  bessInspectionTemplate,
];
